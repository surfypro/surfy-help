---
sidebar_position: 0
---

# L'accès à Surfy

## Qui peut accéder à Surfy ?

On accède à la plateforme Surfy d'un entreprise en créant un compte sécurisé validé par l'entreprise.
Les fonctionnalités accessibles sont déterminées par l'entreprise, en fonction des droits réservés à l'utilisateur.
Le contenu visible est également déterminé par l'entreprise en fonction de l'utilisateur.

## Le mode SaaS

Le SaaS, ou Sorfware as a Service, est un modèle de licence et de distribution utilisé pour fournir des applications logicielles sur Internet, comme un service. Les utilisateurs accèdent aux applications par un abonnement.

L'accès à Surfy se fait en mode SaaS. L'application et les données sont hébergées en France sur les serveurs de Microsoft Azure.

## La sécurité des données

[Pourquoi la sécurité des données est notre priorité](https://www.surfy.pro/security)


## Créer un utilisateur

### Demande de création de compte

Pour accéder à Surfy, l'entreprise doit être abonnée à la solution.<br />
Le futur utilisateur peut alors créer un compte [Surfy](/docs/access/surfy), un compte Microsoft [Office 365](/docs/access/office365) ou un compte [Google](/docs/access/google) et demander la connexion à la plateforme de l'entreprise concernée.<br />
Si l'entreprise utilise l'accès sécurisé par un compte [ENTREPRISE](/docs/access/company), le futur utilisateur peut directement accéder à la plateforme concernée en cliquant sur cette case.

### Utilisateur de l'entreprise

L'administrateur Surfy de l'entreprise reçoit la demande de connexion du futur utilisateur.

Pour accepter le futur utilisateur, l'administrateur doit :

-   dans le menu de gauche, cliquer sur "Administration" puis "Sécurité" et "Utilisateurs de l'entreprise" pour "Créer un utilisateur de l'entreprise". 
-   cliquer sur l'icône "crayon" face à "Utilisateur"
-   taper l'adresse mail complète du futur utilisateur
-   cliquer sur l'adresse mail du futur utilisateur pour la sélectionner
-   valider la création.

:::tip BON A SAVOIR
Si aucune adresse mail n'apparait en tapant l'adresse complète et exacte du futur utilisateur, la demande de création de compte est incomplète ou doit être réitérée.
:::

L'utilisateur de l'entreprise est créé, il reste à lui attribuer un rôle d'utilisateur, et éventuellement un rôle de contenu.<br />
Une fois ces rôles donnés, l'utilisateur peut accéder librement à la plateforme suivant les rôles attribués.


## Attribuer un rôle d'utilisateur

Pour attribuer un rôle d'utilisateur à un utilisateur, depuis le menu de gauche,

-   cliquer sur "Administration" puis "Sécurité" et "Utilisateurs de l'entreprise" pour "Lister les utilisateurs de l'entreprise".
-   cliquer sur l'icone "point rouge" en début de ligne de l'utilisateur concerné pour "modifier l'utilisateur de l'entreprise xxxx@xx"
-   cliquer sur "Rôle de l'utilisateur de l'entreprise" puis sur "CREER UN ROLE DE L'UTILISATEUR DE L'ENTREPRISE"
-   cliquer sur l'icône "Crayon" du "Rôle".

La liste des rôles disponibles apparait

-   choisir le rôle à attribuer puis "Valider la création"

Le rôle s'ajoute à la liste en bas de case. On peut cumuler plusieurs rôles pour un même utilisateur.

-   cliquer sur "Administration" puis "Sécurité" et "Utilisateurs de l'entreprise" pour "Lister les utilisateurs de l'entreprise" afin de vérifier les rôles attribués à chacun.

:::tip ASTUCE
Pour vérifier le bon paramétrage des accès d'un utilisateur, on peut utiliser un compte tiers, le configurer avec le paramétrage voulu puis accéder à la plateforme.
Pour accéder aux deux comptes simultanément (admin et tiers), il est nécessaire d'utiliser deux navigateurs différents ou d'être en navigation privée.
:::


## Modifier le rôle d'un utilisateur

Pour modifier le rôle d'un utilisateur de l'entreprise, on peut retirer un rôle puis attribuer un autre rôle plus adapté à son utilisation de Surfy.

Pour retirer un rôle à un utilisateur de l'entreprise,

-   cliquer sur "Administration" puis "Sécurité" et "Utilisateurs de l'entreprise" pour "Lister les utilisateurs de l'entreprise".
-   cliquer sur l'icone "point rouge" en début de ligne de l'utilisateur concerné pour "modifier l'utilisateur de l'entreprise xxxx@xx"
-   cliquer sur "Rôle de l'utilisateur de l'entreprise"
-   cocher la case en début de ligne du rôle à retirer
-   cliquer sur la corbeille qui apparait
-   confirmer la suppression


## Attribuer un rôle de contenu à l'utilisateur de l'entreprise

Le rôle de contenu permet de choisir les étages ou bâtiments qui seront visibles par l'utilisateur concerné.

Pour attribuer un rôle de contenu à un utilisateur de l'entreprise, dans le menu de gauche,

-   cliquer sur "Administration" puis "Sécurité" et "Utilisateurs de l'entreprise" pour "Lister les utilisateurs de l'entreprise".
-   cliquer sur l'icone "point rouge" en début de ligne de l'utilisateur concerné pour "modifier l'utilisateur de l'entreprise xxxx@xx"
-   cliquer sur "Rôle de contenu de l'utilisateur de l'entreprise" puis sur "CREER UN ROLE DE CONTENU DE L'UTILISATEUR DE L'ENTREPRISE"

La liste des rôles de contenu disponibles apparait. Si le rôle de contenu désiré n'apparait pas, il faut [Créer un rôle de contenu](docs/access/intro.md#créer-un-rôle-de-contenu)

-   choisir le rôle de contenu à attribuer à l'utilisateur puis "Valider la création".

Le rôle de contenu s'ajoute à la liste en bas de case. On peut cumuler plusieurs rôles de contenu pour un même utilisateur.

-   cliquer sur "Administration" puis "Sécurité" et "Utilisateurs de l'entreprise" pour "Lister les utilisateurs de l'entreprise" afin de vérifier les rôles attribués à chacun.

:::tip ASTUCE
Pour vérifier le bon paramétrage des accès d'un utilisateur, on peut utiliser un compte tiers, le configurer avec le paramétrage voulu puis accéder à la plateforme.
Pour accéder aux deux comptes simultanément (admin et tiers), il est nécessaire d'utiliser deux navigateurs différents ou d'être en navigation privée.
:::

## Modifier le rôle de contenu d'un utilisateur de l'entreprise

Pour modifier le rôle de contenu d'un utilisateur de l'entreprise, on peut retirer un rôle de contenu et/ou attribuer un autre rôle de contenu plus adapté à son utilisation de Surfy.

Pour retirer un rôle de contenu à un utilisateur de l'entreprise,

   cliquer sur "Administration" puis "Sécurité" et "Utilisateurs de l'entreprise" pour "Lister les utilisateurs de l'entreprise".
-   cliquer sur l'icone "point rouge" en début de ligne de l'utilisateur concerné pour "modifier l'utilisateur de l'entreprise xxxx@xx"
-   cliquer sur "Rôle de contenu de l'utilisateur de l'entreprise"
-   cocher la case en début de ligne du rôle de contenu à retirer
-   cliquer sur la corbeille qui apparait
-   confirmer la suppression


## Créer un rôle de contenu

On peut créer des rôles de contenu composés d'étages ou de bâtiments.

:::warning ATTENTION
Si on n'utilise que des rôles de contenu composés de bâtiments entiers, la création de rôle de contenu à l'étage n'est pas nécessaire.
En revanche, si un rôle de contenu contient un ou plusieurs étages d'un bâtiment, les rôles de contenu contenant le bâtiment entier doivent inclure tous les étages du bâtiment et non le bâtiment entier.
:::

### Rôle de contenu au bâtiment

Pour créer un rôle de contenu attibuable aux utilisateurs, dans le menu de gauche,

-   cliquer sur "Administration" puis "Sécurité" puis "Rôle de contenu" pour "créer un rôle de contenu".
-   nommer le rôle de contenu à créer (exemple : BATIMENT A seul) et valider la création
-   cliquer sur "Association rôle de contenu aux bâtiments" puis sur "CREER UNE ASSOCIATION DU ROLE DE CONTENU AUX BATIMENTS"
-   cliquer sur l'icône "Crayon" face à la ligne "Bâtiment" pour sélectionner un bâtiment entrant dans le rôle de contenu, et valider la création
-   ajouter tous les bâtiments accessibles dans le rôle de contenu

Les bâtiments sélectionnés s'ajoutent aux éventuels bâtiments déjà associés au rôle de contenu, listés en bas de case.


### Rôle de contenu à l'étage

Pour définir un rôle de contenu par étage, chaque étage concerné doit être inclus dans un rôle de contenu.<br />

-   cliquer sur "Administration" puis "Sécurité" puis "Rôle de contenu" pour "créer un rôle de contenu".
-   nommer le rôle de contenu à créer (exemple : R+1 BATIMENT A seul) et valider la création
-   cliquer sur "Association rôle de contenu aux étages" puis sur "CREER UNE ASSOCIATION DU ROLE DE CONTENU AUX ETAGES"
-   cliquer sur l'icône "Crayon" face à la ligne "Etage" pour sélectionner un étage entrant dans le rôle de contenu, et valider la création
-   ajouter tous les étages accessibles dans le rôle de contenu

Si on utilise un rôle de contenu à l'étage pour un bâtiment, pour visualiser le bâtiment complet il faut intégrer tous les étages du bâtiment dans un rôle de contenu spécifique au bâtiment et l'attribuer à l'utilisateur, ou ajouter les rôles de contenu de chaque étage à l'utilisateur concerné.

## Retirer un utilisateur de l'entreprise

Pour retirer un utilisateur de l'entreprise, dans le menu de gauche,

-   cliquer sur "Administration" puis "Sécurité" et "Utilisateurs de l'entreprise" pour "Lister les utilisateurs de l'entreprise".
-   cocher la case en début de ligne de l'utilisateur à retirer
-   cliquer sur la corbeille en haut de page
-   confirmer la suppression

Dès qu'il est retiré, l'utilisateur n'a plus accès à la plateforme Surfy de l'entreprise.

:::tip BON A SAVOIR
L'utilisateur retiré de son entreprise est toujours potentiellement réattribuable à la plateforme. Il suffit de suivre la même procédure de création d'utilisateur de l'entreprise, sans que l'utilisateur n'ait à redemander l'accès.
:::

## L'authentification automatique

L'authentification automatique permet d'accorder automatiquement l'accès à une plateforme aux futurs utilisateurs, si ceux-ci remplissent les conditions nécessaires :

-   Email avec un nom de domaine précisé dans l'authentification automatique
-   Type de connexion conforme au choix indiqué dans l'authentification automatique

L'utilisateur a alors directement accès à la plateforme, suivant les droits précisés dans l'authentification automatique.

### Créer une règle d'authentification automatique

Pour créer une règle d'authentification, depuis le menu de gauche,

-   cliquer sur "Administration" puis "Authentification" et "Créer une règle d'authentification".
-   cliquer sur l'icône "Crayon" de la "connection d'authentification" afin de choisir le type de connexion :

        -   par OFFICE365 : choisir "AzureADv2"
        -   par GOOGLE : choisir "google-oauth2"
        -   par COMPTE SURFY : choisir "auth0"

-   dans la case "Nom", donner un nom à l'authentification
-   dans la case "Domaines", indiquer le ou les noms de domaine acceptés par l'authentification (@XXX.com). Si plusieurs nom de domaine sont acceptés, séparer les noms de domaine par un espace
-   cocher la case "Associer automatiquement les rôles" afin de donner un rôle commun aux utilisateurs acceptés par l'authentification automatique
-   valider la création

On peut alors associer un rôle d'utilisateur et un rôle de contenu éventuel pour les utilisateurs acceptés par l'authentification automatique :

-   cliquer sur "Associations de règle d'authentification à rôle" puis "CREER UNE ASSOCIATION DE REGLE D'AUTHENTIFICATION A ROLE" pour choisir le rôle d'utilisateur aux collaborateurs acceptés.
-    cliquer sur "Associations de règle d'authentification à contenu" puis "CREER UNE ASSOCIATION DE REGLE D'AUTHENTIFICATION A CONTENU" pour choisir le rôle de contenu visible aux collaborateurs acceptés.

Si aucun rôle de contenu n'est associé, les utilisateurs acceptés auront accès à tous les bâtiments de la plateforme.
Si aucun rôle d'utilisateur n'est associé, ou si la case "Associer automatiquement les rôles" n'est pas cochée, l'utilisateur est accepté sur la plateforme mais ne peut pas accéder à celle-ci tant que l'administrateur ne lui a pas donné de rôle d'utilisateur.